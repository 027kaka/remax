<template name="REMAX_TPL">
	<block s-for="root.children">
		<template is="REMAX_TPL_1_CONTAINER" data="{{{i: root.nodes[item], a: ''}}}" />
	</block>
</template>

<import-sjs module="_h">
	var elements = {};
	module.exports = {
		v: function(value) {
			return value !== undefined ? value : '';
		},
		tid: function (type, ancestor) {
			var items = ancestor.split(',');
			var depth = 1;

			for (var i = 0; i < items.length; i++) {
				if (type === items[i]) {
					depth = depth + 1;
				}
			}

			var id = 'REMAX_TPL_' + depth + '_' + type;
			return id;
		}
	};
</import-sjs>
<%_ for (let component of components) { %>
	<%_ var componentDepth = depth[component.id] || 10; %>
	<%_ if (component.id === 'text') { %> 
		<%- include('./text.ejs', {
		props: component.props,
		id: component.id,
		type: component.type,
		depth: componentDepth
		}) _%> 
	<%_ } else { _%>
		<%_ for (var i = 1; i <= componentDepth; i++) { %>
		<%- include('./component.ejs', {
			props: component.props,
			id: component.id,
			templateId: i,
			type: component.type,
			slotView: slotView
		}) _%>
		<%_ } _%>
	<%_ } _%>
<%_ } _%>
<template name="REMAX_TPL_1_plain-text" data="{{i: i}}">
	<block>{{i.text}}</block>
</template>
<%_ for (var i = 1; i <= depth['view']; i++) { %>
<template name="REMAX_TPL_<%=i%>_CONTAINER" data="{{{i: i}}}">
	<template is="{{_h.tid(i.type, a)}}" data="{{{i: i, a: a + ',' + i.type, tid: <%= i %>}}}" />
</template>
<%_ } _%>
